# JCourse æœ¬åœ°éƒ¨ç½²å®Œæ•´æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å®Œæˆ JCourse é¡¹ç›®çš„å®Œæ•´æœ¬åœ°éƒ¨ç½²ï¼ŒåŒ…æ‹¬ï¼š
- å‰ç«¯ Next.js åº”ç”¨
- åç«¯ Django API
- PostgreSQL æ•°æ®åº“
- Redis ç¼“å­˜
- æ•™å¸ˆè¯„ä»·æ•°æ®é›†æˆ

## ğŸ› ï¸ ç¯å¢ƒè¦æ±‚

### å¿…éœ€è½¯ä»¶
- **Python 3.9+** - åç«¯è¿è¡Œç¯å¢ƒ
- **Node.js 16+** - å‰ç«¯è¿è¡Œç¯å¢ƒ
- **Docker Desktop** - æ•°æ®åº“å®¹å™¨åŒ–
- **Git** - ä»£ç ç‰ˆæœ¬æ§åˆ¶

### å¯é€‰è½¯ä»¶
- **VS Code** - æ¨èçš„å¼€å‘ç¯å¢ƒ
- **Postman** - API æµ‹è¯•å·¥å…·

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### æ–¹æ³•ä¸€ï¼šä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
git clone <repository-url>
cd Jcourse-stable

# 2. ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy-local.sh
chmod +x stop-dev.sh

# 3. è¿è¡Œä¸€é”®éƒ¨ç½²è„šæœ¬
./deploy-local.sh
```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

å¦‚æœä¸€é”®éƒ¨ç½²é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨éƒ¨ç½²ï¼š

#### 1. åç«¯ç¯å¢ƒè®¾ç½®

```bash
cd jcourse_api-master

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶
cat > .env << EOF
DEBUG=True
POSTGRES_PASSWORD=jcourse
POSTGRES_HOST=localhost
REDIS_HOST=localhost
SECRET_KEY=django-insecure-dev-key-$(date +%s)
HASH_SALT=dev-salt-$(date +%s)
EOF
```

#### 2. å¯åŠ¨æ•°æ®åº“æœåŠ¡

```bash
# åœ¨ jcourse_api-master ç›®å½•ä¸‹
docker-compose -f docker-compose.dev.yml up -d

# ç­‰å¾…æ•°æ®åº“å¯åŠ¨
sleep 10
```

#### 3. åˆå§‹åŒ–æ•°æ®åº“

```bash
# æ•°æ®åº“è¿ç§»
python manage.py migrate

# åˆ›å»ºè¶…çº§ç”¨æˆ·
python manage.py createsuperuser
```

#### 4. å¯¼å…¥æ•°æ®

```bash
# å¯¼å…¥æ•™å¸ˆè¯„ä»·æ•°æ®
python scripts/import_teacher_evaluations.py ../jcourse-data/merged_teacher_evaluations.csv

# å¦‚æœæœ‰è¯¾è¡¨æ•°æ®ï¼Œä¹Ÿå¯ä»¥å¯¼å…¥
# python scripts/import_course_schedule.py ../è¯¾è¡¨æ•°æ®/æŸå­¦æœŸè¯¾è¡¨.csv "2024-1"
```

#### 5. å¯åŠ¨åç«¯æœåŠ¡

```bash
python manage.py runserver 0.0.0.0:8000
```

#### 6. å‰ç«¯ç¯å¢ƒè®¾ç½®

```bash
# æ–°å¼€ç»ˆç«¯ï¼Œè¿›å…¥å‰ç«¯ç›®å½•
cd jcourse-master

# å®‰è£…ä¾èµ–
npm install --legacy-peer-deps

# åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶
echo "REMOTE_URL=http://localhost:8000" > .env.local

# å¯åŠ¨å‰ç«¯æœåŠ¡
npm run dev
```

## ğŸ“Š éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€

- **å‰ç«¯**: http://localhost:3000
- **åç«¯API**: http://localhost:8000
- **ç®¡ç†åå°**: http://localhost:8000/admin

### 2. æµ‹è¯•æ•™å¸ˆè¯„ä»·åŠŸèƒ½

1. è®¿é—® http://localhost:3000/teachers
2. æœç´¢æ•™å¸ˆå§“åï¼Œå¦‚"å¼ ä¸‰"
3. æŸ¥çœ‹è¯¾ç¨‹è¯¦æƒ…é¡µé¢çš„æ•™å¸ˆè¯„ä»·å¡ç‰‡

### 3. API æµ‹è¯•

```bash
# æµ‹è¯•æ•™å¸ˆè¯„ä»·API
curl "http://localhost:8000/api/teacher-evaluation/"

# æœç´¢ç‰¹å®šæ•™å¸ˆçš„è¯„ä»·
curl "http://localhost:8000/api/teacher-evaluation/search_by_teacher/?name=å¼ ä¸‰"

# è·å–è¯„ä»·ç»Ÿè®¡
curl "http://localhost:8000/api/teacher-evaluation/statistics/"
```

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### 1. æ•°æ®åº“è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥Dockeræ˜¯å¦è¿è¡Œ
docker ps

# é‡å¯æ•°æ®åº“å®¹å™¨
cd jcourse_api-master
docker-compose -f docker-compose.dev.yml restart
```

### 2. å‰ç«¯ä¾èµ–å®‰è£…å¤±è´¥

```bash
# æ¸…ç†ç¼“å­˜é‡æ–°å®‰è£…
cd jcourse-master
rm -rf node_modules package-lock.json
npm install --legacy-peer-deps
```

### 3. åç«¯è¿ç§»å¤±è´¥

```bash
# é‡ç½®æ•°æ®åº“
cd jcourse_api-master
docker-compose -f docker-compose.dev.yml down -v
docker-compose -f docker-compose.dev.yml up -d
sleep 10
python manage.py migrate
```

### 4. æ•™å¸ˆè¯„ä»·æ•°æ®å¯¼å…¥å¤±è´¥

```bash
# æ£€æŸ¥æ•°æ®æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la ../jcourse-data/merged_teacher_evaluations.csv

# æ‰‹åŠ¨è¿è¡Œå¯¼å…¥è„šæœ¬
cd jcourse_api-master
source venv/bin/activate
python scripts/import_teacher_evaluations.py ../jcourse-data/merged_teacher_evaluations.csv --force
```

## ğŸ›‘ åœæ­¢æœåŠ¡

### ä½¿ç”¨è„šæœ¬åœæ­¢

```bash
./stop-dev.sh
```

### æ‰‹åŠ¨åœæ­¢

```bash
# åœæ­¢å‰ç«¯å’Œåç«¯è¿›ç¨‹
pkill -f "npm run dev"
pkill -f "manage.py runserver"

# åœæ­¢æ•°æ®åº“
cd jcourse_api-master
docker-compose -f docker-compose.dev.yml down
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
Jcourse-stable/
â”œâ”€â”€ jcourse-master/           # å‰ç«¯ Next.js é¡¹ç›®
â”œâ”€â”€ jcourse_api-master/       # åç«¯ Django é¡¹ç›®
â”œâ”€â”€ jcourse-data/            # æ•™å¸ˆè¯„ä»·æ•°æ®
â”œâ”€â”€ deploy-local.sh          # ä¸€é”®éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ stop-dev.sh             # åœæ­¢æœåŠ¡è„šæœ¬
â””â”€â”€ æœ¬åœ°éƒ¨ç½²å®Œæ•´æŒ‡å—.md      # æœ¬æ–‡æ¡£
```

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### å·²é›†æˆçš„æ•™å¸ˆè¯„ä»·åŠŸèƒ½

1. **æ•™å¸ˆè¯„ä»·æ•°æ®æ¨¡å‹** - Django åç«¯
2. **æ•™å¸ˆè¯„ä»· API** - RESTful æ¥å£
3. **æ•™å¸ˆè¯„ä»·æœç´¢é¡µé¢** - `/teachers`
4. **è¯¾ç¨‹é¡µé¢è¯„ä»·å¡ç‰‡** - è¯¾ç¨‹è¯¦æƒ…é¡µé›†æˆ
5. **ç®¡ç†åå°** - Django Admin ç®¡ç†ç•Œé¢

### æ•°æ®ç»Ÿè®¡

- **1,698** ä½æ•™å¸ˆæ•°æ®
- **547** ä½æ•™å¸ˆæœ‰è¯„ä»·å†…å®¹
- **4,294** æ¡åŸå§‹è¯„ä»·ï¼ˆå·²å»é‡åˆå¹¶ï¼‰

## ğŸ”— ç›¸å…³é“¾æ¥

- **å‰ç«¯é¡¹ç›®**: http://localhost:3000
- **åç«¯APIæ–‡æ¡£**: http://localhost:8000/api/
- **ç®¡ç†åå°**: http://localhost:8000/admin
- **æ•™å¸ˆè¯„ä»·æœç´¢**: http://localhost:3000/teachers

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š

1. **æ—¥å¿—æ–‡ä»¶**:
   - åç«¯: `jcourse_api-master/backend.log`
   - å‰ç«¯: `jcourse-master/frontend.log`

2. **æœåŠ¡çŠ¶æ€**:
   ```bash
   # æ£€æŸ¥ç«¯å£å ç”¨
   lsof -i :3000  # å‰ç«¯
   lsof -i :8000  # åç«¯
   lsof -i :5432  # æ•°æ®åº“
   ```

3. **Docker å®¹å™¨**:
   ```bash
   docker ps
   docker logs <container_name>
   ```

---

**æœ€åæ›´æ–°**: 2025-07-13  
**ç‰ˆæœ¬**: 1.0  
**ç»´æŠ¤è€…**: JCourse å¼€å‘å›¢é˜Ÿ
